# UX/인터랙션 설계 가이드

## 1. 설계 원칙

### 1.1 "보면 안다" 원칙
텍스트 설명 없이 애니메이션만 보고도 알고리즘의 핵심 동작을 이해할 수 있어야 한다.
- 색상으로 상태를 구분한다 (비교 중, 교환, 확정, 방문 등)
- 움직임으로 데이터의 이동을 보여준다
- 크기/위치로 관계를 표현한다 (부모-자식, 정렬 순서)

### 1.2 "통제감" 원칙
사용자가 언제든 애니메이션을 제어할 수 있어야 한다.
- 재생/일시정지/정지
- 한 스텝 앞으로/뒤로
- 속도 조절 (빠르게 전체 흐름 파악 ↔ 느리게 세부 확인)
- 처음부터 다시

### 1.3 "맥락 유지" 원칙
현재 무엇이 일어나고 있는지 항상 알 수 있어야 한다.
- 의사코드의 현재 줄 하이라이트
- 단계 설명 텍스트
- 진행률 표시 (3/12 스텝)
- 비교/교환 카운터

---

## 2. 색상 체계

기존 힙 프로젝트의 색상을 확장하여, 모든 알고리즘에서 일관된 의미를 부여한다.

### 2.1 노드/셀 상태 색상

| 상태 | 색상 | 코드 | 용도 |
|------|------|------|------|
| 기본 | 파랑 | `#3b82f6` | 아직 처리되지 않은 기본 상태 |
| 비교 중 | 주황 | `#f59e0b` | 현재 비교/탐색 중인 원소 |
| 교환/이동 | 빨강 | `#ef4444` | 교환, 제거, 이동 중인 원소 |
| 확정/완료 | 초록 | `#10b981` | 올바른 위치에 확정된 원소 |
| 피벗 | 보라 | `#8b5cf6` | Quick Sort 피벗, 특수 역할 |
| 방문 중 | 주황 | `#f59e0b` | 그래프에서 현재 탐색 중인 노드 |
| 방문 완료 | 초록 | `#10b981` | 그래프에서 처리 완료된 노드 |
| 미방문 | 회색 | `#64748b` | 아직 도달하지 않은 노드 |
| 경로 | 노랑 | `#eab308` | 최단 경로, 결과 경로 |

### 2.2 간선 상태 색상 (그래프)

| 상태 | 색상 | 용도 |
|------|------|------|
| 기본 | `rgba(148,163,184,0.4)` | 연결만 표시 |
| 탐색 중 | `#f59e0b` | 현재 확인 중인 간선 |
| 선택됨 | `#10b981` | MST에 포함된 간선, 최단 경로 간선 |
| 제외됨 | `rgba(148,163,184,0.15)` | 더 이상 후보가 아닌 간선 |

### 2.3 CSS 변수로 관리

```css
:root {
  /* 상태 색상 */
  --state-default: #3b82f6;
  --state-comparing: #f59e0b;
  --state-swapping: #ef4444;
  --state-complete: #10b981;
  --state-pivot: #8b5cf6;
  --state-unvisited: #64748b;
  --state-path: #eab308;
}
```

---

## 3. 알고리즘 페이지 인터랙션 흐름

### 3.1 기본 흐름

```
[페이지 진입]
    │
    ▼
[초기 데이터 표시] ← 프리셋 또는 이전 상태
    │
    ├── [사용자 데이터 입력] → 커스텀 배열/그래프 설정
    │
    ├── [프리셋 선택] → 랜덤 / 최선 / 최악 / 거의 정렬됨
    │
    ▼
[실행 버튼 클릭]
    │
    ▼
[알고리즘 로직 실행] → Step[] 생성 (즉시, 비동기 아님)
    │
    ▼
[애니메이션 시작]
    │
    ├── 각 스텝마다:
    │   ├── 뷰 업데이트 (배열/트리/그래프 상태 반영)
    │   ├── 하이라이트 적용 (색상 변경)
    │   ├── 설명 텍스트 업데이트
    │   ├── 의사코드 줄 하이라이트
    │   └── 카운터 업데이트 (비교 N회, 교환 M회)
    │
    ├── [일시정지] → 현재 스텝에서 멈춤
    │   └── [한 스텝 앞으로/뒤로] → 수동 탐색
    │
    ├── [속도 변경] → 다음 스텝부터 적용
    │
    └── [정지] → 최종 상태로 점프
         │
         ▼
    [결과 표시] → 총 비교/교환 횟수, 완료 메시지
```

### 3.2 비교 모드 흐름

```
[같은 입력 데이터]
    │
    ├──────────────────┐
    ▼                  ▼
[알고리즘 A 실행]  [알고리즘 B 실행]
    │                  │
    ▼                  ▼
[Step[] A]         [Step[] B]
    │                  │
    └──────┬───────────┘
           ▼
[동기화 애니메이션]
    │
    ├── 같은 타이밍으로 양쪽 진행
    ├── 한쪽이 먼저 끝나면 대기
    │
    ▼
[결과 비교]
    ├── 비교 횟수 차이
    ├── 교환 횟수 차이
    └── 총 스텝 수 차이
```

---

## 4. 컨트롤 바 설계

모든 알고리즘 페이지에서 동일한 컨트롤 바를 사용한다.

```
┌──────────────────────────────────────────────────────┐
│  [입력 필드] [실행] │ [◀◀] [◀] [▶/⏸] [▶] [▶▶] │ 속도 [━━━●━━] 800ms │ [리셋]  │
│                     │  처음  이전 재생   다음 끝    │                      │        │
└──────────────────────────────────────────────────────┘
```

### 입력 영역 (왼쪽)
- 알고리즘별로 다른 입력 UI
  - 정렬/탐색: 숫자 배열 입력 (콤마 구분) + 프리셋 드롭다운
  - 자료구조: 값 입력 + 연산 버튼 (push, pop, insert 등)
  - 그래프: 미리 정의된 그래프 프리셋 선택 또는 노드/간선 편집

### 재생 컨트롤 (중앙)
- `◀◀` 처음으로: 스텝 0으로 이동
- `◀` 이전: 한 스텝 뒤로
- `▶` 재생 / `⏸` 일시정지: 토글
- `▶` 다음: 한 스텝 앞으로
- `▶▶` 끝으로: 마지막 스텝으로 점프

### 속도 조절 (오른쪽)
- 슬라이더: 200ms (빠름) ~ 2000ms (느림)
- 현재 속도 숫자 표시

---

## 5. 데이터 입력 패턴

### 5.1 배열 입력 (정렬, 탐색)

```
┌─ 데이터 입력 ──────────────────────────────┐
│                                             │
│  직접 입력: [38, 27, 43, 3, 9, 82, 10]     │
│                                             │
│  프리셋:  [랜덤 ▼]  크기: [10 ▼]            │
│           ├─ 랜덤                            │
│           ├─ 거의 정렬됨                     │
│           ├─ 역순                            │
│           ├─ 모두 같은 값                     │
│           └─ 커스텀                           │
│                                             │
│  [배열 생성]                                 │
└─────────────────────────────────────────────┘
```

- 직접 입력: 콤마로 구분된 숫자
- 프리셋: 자주 쓰는 패턴 (랜덤, 정렬됨, 역순 등)
- 크기: 5, 8, 10, 15, 20 중 선택
- 범위 제한: 숫자 값 -999~999, 크기 최대 24개

### 5.2 자료구조 입력

```
┌─ 연산 ──────────────────────────┐
│                                  │
│  값: [___]  [Push]  [Pop]        │
│             [Peek]  [Clear]      │
│                                  │
│  프리셋: [5개 자동 삽입]          │
└──────────────────────────────────┘
```

- 단일 값 입력 + 연산 버튼
- 현재 힙 프로젝트와 동일한 패턴

### 5.3 그래프 입력

```
┌─ 그래프 설정 ────────────────────┐
│                                  │
│  프리셋: [기본 그래프 ▼]          │
│          ├─ 이진 트리형           │
│          ├─ 격자형                │
│          ├─ 완전 연결             │
│          ├─ 희소 그래프           │
│          └─ 커스텀               │
│                                  │
│  시작 노드: [A ▼]                │
│  목표 노드: [F ▼] (탐색용)       │
│                                  │
│  [실행]                          │
└──────────────────────────────────┘
```

- 초기에는 프리셋 그래프만 제공
- 추후 노드/간선 편집기 추가 가능

---

## 6. 의사코드 연동

알고리즘 실행 중 의사코드의 해당 줄이 하이라이트된다.

```
┌─ 의사코드 ──────────────────────┐
│                                  │
│  function bubbleSort(arr):       │
│    for i = 0 to n-1:             │
│  ▶   for j = 0 to n-i-2:     ◀  │  ← 현재 줄 하이라이트
│        if arr[j] > arr[j+1]:     │
│          swap(arr[j], arr[j+1])  │
│    return arr                    │
│                                  │
└──────────────────────────────────┘
```

### 구현 방식
- 각 `AlgorithmStep`에 `pseudocodeLine` 필드 포함
- `PseudocodeView` 컴포넌트가 해당 줄에 배경색 적용
- 줄 번호 표시 (선택)

---

## 7. 반응형 설계

### 데스크톱 (> 1024px)
```
┌──────────┬───────────────────────────────┐
│ Sidebar  │  메인 뷰 + 보조 뷰 (나란히)    │
│          ├───────────────────────────────┤
│          │  컨트롤 + 스텝 정보            │
└──────────┴───────────────────────────────┘
```

### 태블릿 (768px ~ 1024px)
```
┌─────────────────────────────────┐
│  Header (햄버거 메뉴)            │
├─────────────────────────────────┤
│  메인 뷰                         │
├─────────────────────────────────┤
│  보조 뷰 (접힘 가능)             │
├─────────────────────────────────┤
│  컨트롤                          │
└─────────────────────────────────┘
```

### 모바일 (< 768px)
- 지원은 하되, 최적화 우선순위는 낮음
- 세로 스택 레이아웃
- 터치로 스텝 넘기기 (스와이프)

---

## 8. 접근성

| 항목 | 구현 방법 |
|------|----------|
| 키보드 네비게이션 | 스페이스바로 재생/정지, 좌우 화살표로 스텝 이동 |
| 스크린 리더 | 각 스텝의 `description`을 `aria-live` 영역으로 전달 |
| 색각 이상 | 색상만이 아닌 패턴/아이콘으로 상태 구분 (점선, 굵은선 등) |
| 모션 감소 | `prefers-reduced-motion` 미디어 쿼리 — 애니메이션 제거, 즉시 전환 |

---

## 9. 각 알고리즘 유형별 UX 패턴

### 9.1 정렬 알고리즘

**메인 뷰**: BarChartView (막대 높이 = 값의 크기)
- 비교 중인 두 막대: 주황색
- 교환 시: 막대가 서로 자리를 바꾸는 애니메이션 (수평 이동)
- 확정된 위치: 초록색으로 변환
- 피벗 (Quick Sort): 보라색 강조

**보조 뷰**: 배열 인덱스 뷰 + 의사코드
- 배열 값이 변할 때마다 동기화

### 9.2 자료구조

**스택/큐**: 전용 StackView/QueueView
- push: 새 원소가 위(스택) 또는 뒤(큐)에서 슬라이드 인
- pop: 원소가 위(스택) 또는 앞(큐)에서 슬라이드 아웃
- 현재 top/front 강조

**BST**: TreeView
- 삽입: 루트에서 비교하며 내려가는 경로 표시 → 리프에 새 노드 추가
- 삭제: 3가지 케이스를 시각적으로 구분
- 탐색: 찾는 값과 비교하며 좌/우 이동

### 9.3 그래프 알고리즘

**메인 뷰**: GraphView (노드 원 + 간선 선)
- 노드 색상으로 방문 상태 표시
- 현재 탐색 중인 간선 하이라이트
- 가중치 표시 (Dijkstra 등)

**보조 뷰**: 큐(BFS) 또는 스택(DFS) + 거리 테이블(Dijkstra)
- 보조 자료구조의 변화를 실시간 표시

### 9.4 동적 프로그래밍

**메인 뷰**: TableView (2D 테이블) 또는 RecursionTreeView
- 테이블 셀이 하나씩 채워지는 애니메이션
- 현재 계산 중인 셀 강조
- 참조하는 이전 셀과의 화살표

**보조 뷰**: 재귀 트리 (메모이제이션 전/후 비교)
- 중복 계산되는 부분 트리를 빨간색으로 표시
- 메모이제이션 후 캐시 히트를 초록으로 표시
